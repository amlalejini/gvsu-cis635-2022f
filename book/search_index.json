[["index.html", "GVSU CIS 635 - Knowledge Discovery and Data Mining (Fall 2022) Chapter 1 Introduction", " GVSU CIS 635 - Knowledge Discovery and Data Mining (Fall 2022) Instructor: Dr. Alexander Lalejini 2022-09-01 Chapter 1 Introduction This eBook contains some of the course materials for the Fall 2022 sections 02 and 03 of CIS 635 at Grand Valley State University. "],["getting-started-with-r-markdown.html", "Chapter 2 Getting Started with R Markdown 2.1 Dependencies 2.2 Create a new R Markdown document in RStudio 2.3 Anatomy of an R Markdown document 2.4 “Knitting” 2.5 Resources", " Chapter 2 Getting Started with R Markdown R markdown documents are a way to interweave markdown with R. This enables us to write nicely formatted documents with R code (and output from your R code) embedded directly in the document. Find examples of compiled R markdown documents here: https://rmarkdown.rstudio.com/gallery.html In fact, this page is generated with R Markdown! Source code for this page here. 2.1 Dependencies To use R markdown, you’ll need to install the following packages: markdown and rmarkdown. You should also want to go ahead and install the tinytex package (+ install TinyTex) to be able generate PDF output from your R Markdown documents. See the instructions below! 2.1.1 Installing R packages As previously mentioned, there are many R packages (&gt; 18,000!) with all sorts of useful functionality. To install an R package, use the install.packages function in your R console (e.g., in RStudio). Run ?install.packages in your R console to read its help page. To install the markdown and rmarkdown packages, run the following command in your R console: install.packages(c(&quot;markdown&quot;, &quot;rmarkdown&quot;)) Once the installations finish, you should be able to run the following two commands without errors: library(markdown) library(rmarkdown) For this class, you’ll also need to be able to generate PDF output from your R Markdown documents. To do so, you’ll need to instal LaTex (if you’re not sure what that is, no worries!). Run the following two commands in your R console in RStudio: install.packages(&#39;tinytex&#39;) tinytex::install_tinytex() 2.2 Create a new R Markdown document in RStudio Click the new file button in the top right of the RStudio window, and select R Markdown. In RStudio, you should get a pop-up for creating a new r markdown document. For now, there are two relevant options: Click the “Create Empty Document” in the bottom left of the popup. This will create an empty R markdown file for you. Fill out the title, author (you!), and date fields and press “Okay”. This will create a new R markdown file, but RStudio will initialize your file with a bunch of stuff (this stuff is helpful information, but you will want to delete it all for any assignments in this class). 2.3 Anatomy of an R Markdown document There are three basic components in an R Markdown document: the metadata, text, and code. Here’s the contents for a minimal R Markdown document (from https://bookdown.org/yihui/rmarkdown/basics.html): An R Markdown document should be a plain text file (i.e., don’t try to write one in google docs or microsoft word!) and conventionally has the .Rmd file extension. 2.3.1 Frontmatter (metadata) The metadata (or the frontmatter) specifies how your R Markdown should be compiled. E.g., the output file type, whether to include a table of contents, etc. The metadata should be written between a pair of three dashes --- at the top of your document (see minimal example). For now, don’t worry too much about what you should include in your document metadata. For the most part, you can just use what RStudio includes in your document. 2.3.2 Text The body of your document follows the metadata. Any text (i.e., everything that isn’t code) you include in your document should follow markdown syntax. If you’re not already familiar with markdown, read over this: https://www.markdownguide.org/getting-started. For basic markdown syntax, see: https://www.markdownguide.org/basic-syntax/. Being familiar with basic syntax should be just about everything you need for your homework assignments in this class. For more advanced markdown syntax, see: https://www.markdownguide.org/extended-syntax/. You can also refer to Section 2.5 in R Markdown: The Definitive Guide for more info on markdown. 2.3.3 Code In general, you can include code in your R Markdown documents in two ways: Inline code begin with `r and end with a `. E.g., 2 would render the result of log(4, base=2) inline. You can include a “code chunk” inside your R Markdown document. A code chunk begins with three backticks ```{r} and end with three backticks (see minimal example above for an example). There are many options tha tyou can specify in the {} at the beginning of a code chunk. See https://yihui.org/knitr/options/ for details. 2.4 “Knitting” To compile an R Markdown document into a PDF or HTML file, you need to “Knit” it. In RStudio, this is pretty straightforward. Just click the “Knit” button on your document in RStudio. 2.5 Resources R Markdown: The Definitive Guide Code chunk options: https://yihui.org/knitr/options/ "],["homework-1.html", "Chapter 3 Homework 1 3.1 Setup 3.2 Part A. Use R as a calculator 3.3 Part B. Built-in Functions 3.4 Part C. Creating vectors 3.5 Part D. Subsetting vectors 3.6 Part E. Types of data", " Chapter 3 Homework 1 This goal of this homework is as follows: Give you an opportunity to practice some R programming basics Make sure you are comfortable creating and knitting an R Markdown document Grading Each question is weighted evenly 3.1 Setup Make sure you have access to a computer with R and RStudio installed (with the ability to install new packages). If you do not, let me know as soon as possible! If you have not done so already, install R and RStudio (step-by-step guides provided in week 1 course content). I strongly encourage you to stay organized. I recommend that you directory on your computer where you can save all of your work for this class (e.g., “cis635” would make for a good name). Within that directory, I recommend keeping each of your homework assignments and projects separated into their own directories. For example, I might organize things as follows: cis635/ homeworks/ hw01 hw02 ... project/ ... Create a new R Markdown file with the title “Homework 1” and with you as the author (hint: this information will go into your R Markdown frontmatter at the top of the file). In your R markdown file, create a section heading for each of the following parts of your homework: Part A. Use R as a calculator Part B. Built-in Functions Part C. Creating vectors Part D. Subsetting vectors Part E. Types of data 3.2 Part A. Use R as a calculator Under your Part A heading, write one code chunk for each of the following calculations: \\[ 1+2(3+4) \\] \\[ log_2(4^3 + 3^{2+1}) \\] \\[ \\sqrt{(4+3)(2+1)} \\] For example, if the calculation is 2 + 2, your code chunk should look something like this when your R Markdown document is compiled: 2+2 ## [1] 4 I want to see each equation translated directly into code. Do not simplify any of the calculations (e.g., 2+1 should be 2+1 in your code, not 3). 3.3 Part B. Built-in Functions A built-in function is one that comes pre-loaded in R (you don’t need to install and load a package to use). To learn how to use a built-in loaded function that you don’t know how to use appropriately, use the help() function. help() takes one parameter, the name of the function that you want information about (e.g., help(abs)). Instead of the help function, you could also use enter ? and then the name of the function in your R console (e.g., ?abs). Familiarize yourself with the built-in functions abs(), round(), sqrt(), tolower(), and toupper(). Under your Part B heading, use these built-in functions to write code that prints the following items (put each of these into a different code chunk in your R Markdown document): The absolute value of -15.5. 4.483847 rounded to one decimal place. The function round() takes two arguments, the number to be rounded and the number of decimal places. “species” in all capital letters. “SPECIES” in all lower case letters. 3.4 Part C. Creating vectors Under your Part C heading, Create the following vectors using just seq() and/or rep(). (don’t use c()) Positive integers from 1 to 99 Odd integers between 1 and 99 The numbers 1,1,1,2,2,2,3,3,3 (hint: read the help pages for seq and rep!) 3.5 Part D. Subsetting vectors Under your Part D heading, use subsetting syntax (square brackets) to write code that completes the following using the vector y. y &lt;- c(3,2,15,-1,22,1,9,17,5) Display only the first value of y. Display the last value of y, in a way that would work if y were any length. (hint: ?length) Display only the values in y that are greater than the mean of y. 3.6 Part E. Types of data Under your part E heading, using the vector y write code that completes the following tasks: y &lt;- c(3,2,15,-1,22,1,9,17,5) Make a logical (TRUE/FALSE) vector describing which values in y are positive. Make a logical vector describing whether any of the values of y are equal to the mean of y. Coerce the vector you just made (in #2 above) from a logical vector to a character vector. Make a logical vector describing whether any of the values of y are equal to the median of y. Coerce the vector you just made (in #4 above) into a categorial vector (using factor()). Make a matrix with 4 rows and 3 columns that looks like this: ## [,1] [,2] [,3] ## [1,] 1 2 3 ## [2,] 4 5 6 ## [3,] 7 8 9 ## [4,] 10 11 12 Coerce that matrix into a dataframe. "],["week-02---overview.html", "Chapter 4 Week 02 - Overview 4.1 Dependencies", " Chapter 4 Week 02 - Overview This week, we’ll be practicing more R programming: Writing functions Reading/writing data tidyverse packages Using dplyr functionality to manipulate data Using tidyr functionality to reformat data Using ggplot2 to create graphics 4.1 Dependencies For this week, you’ll need to install the following R packages: install.packages(&quot;tidyverse&quot;) "],["functions-in-r.html", "Chapter 5 Functions in R 5.1 Argument order and default values 5.2 Writing your own functions 5.3 Return values 5.4 Default argument values 5.5 Resources", " Chapter 5 Functions in R You can download the R Markdown file used to generate this document (or webpage) here. I would encourage you to download that Rmd file, open it own your own computer in RStudio, and run the code chunks on your own (and modify things as you wish!). In this tutorial, We’ll go over argument order and default values when calling functions in R We’ll go over the basics of writing functions in R 5.1 Argument order and default values As you encountered last week, R has many built-in functions (e.g., abs, round, etc), and all of R packages that you install provide even more functions that you can use. Using an existing function is simple. Write the name of the function you want to use followed by the requisite arguments in parentheses. For example, value &lt;- -15 abs(value) ## [1] 15 or, log(4, base=2) ## [1] 2 If you look at the documentation for abs (enter ?abs into your R console), there’s only one argument (x), and x is required (i.e., notice that it has no default values). In contrast, run ?log function in your R console. Notice that there are two possible arguments for log, x and base. x is required, as it has no default value, but base is optional, defaulting to exp(1) if not provided. Let’s say we want to take the \\(log_3\\) of 27. To do so, we’ll need to specify both the x and base arguments, but there are a few ways that we can do that. For example, we could call log with each argument in the correct position: log(27, 3) ## [1] 3 We could call log as I did above with log(4, base=2): log(27, base=3) ## [1] 3 In this case, R relies on argument position to deduce which argument is which up until the first named variable. We could also specify all arguments using their names: log(x=27, base=3) ## [1] 3 If you specify arguments this way (using their names), argument order doesn’t matter. log(base=3, x=27) ## [1] 3 When calling a function with multiple arguments, I strongly encourage you to specify arguments by name. 5.2 Writing your own functions To write a function in R, the general structure is as follows: my_function &lt;- function(parameters) { # Perform some actions using the given parameters. # Optionally, return some value } We can write a function that rolls a die for us like so: # This function rolls a six-sided die. # Run ?sample in your console if you&#39;re curious about how the sample function # works. roll &lt;- function() { result &lt;- sample(x = 1:6, size = 1, replace = TRUE) return(result) } Currently, roll_d6 will always simulate rolling a six-sided die. We could modify our function definition to add an argument that specifies the size of the die: # This function simulates rolling a die with a given number of sides. roll &lt;- function(sides) { result &lt;- sample(x = 1:sides, size = 1, replace = TRUE) return(result) } Note that when we run the code chunk above, we are redefining our roll function. Challenge question: Try writing your own roll function that rolls an argument-specified number of dice (where the number of sides of each die is specified by an argument) and then returns the sum of those rolls. 5.3 Return values In the roll functions that we wrote, we explicitly specified what the functions should return. However, if you do not use return() to specify what should be returned, the last evaluated expression is returned automatically. If the last evaluated expression doesn’t produce a value, your function will not return a value. I generally prefer to use explicit return statements because it lets me quickly identify what my functions are returning. Here’s a silly function: silly_function &lt;- function(a) { if (a == 1) { a + 100 } else if (a == 2) { 200 } else if (a == 3) { return(300) } else { } } Try calling silly_function with different inputs to see what it returns. 5.4 Default argument values Just like many built-in functions have some arguments with defualt values, you can define your functions such their arguments have default values. All you need to do is specify the default value of an argument when you define the function. For example, if we wrote a function that calculates the price something with a sales tax included, we might specify a default tax rate for convenience. price_with_tax &lt;- function(price, tax_rate=0.06) { return(price+(price*tax_rate)) } 5.5 Resources Hands-on Programming with R (2.3, 2.4) Software carpentry lesson on writing functions in R "],["reading-and-writing-data.html", "Chapter 6 Reading and Writing Data 6.1 Writing data 6.2 Loading data", " Chapter 6 Reading and Writing Data You can download the R Markdown file used to generate this document (or webpage) here. I would encourage you to download that Rmd file, open it own your own computer in RStudio, and run the code chunks on your own (and modify things as you wish!). In this tutorial: I’ll walk you through how to write data stored in a dataframe as a .csv file. And, I’ll show you how to load data saved in a .csv file into a dataframe. 6.1 Writing data R comes preloaded with many datasets (for a complete list run library(help=\"datasets\")). For example, Orange is a small data set that gives growth data for 5 orange trees. head(Orange) ## Tree age circumference ## 1 1 118 30 ## 2 1 484 58 ## 3 1 664 87 ## 4 1 1004 115 ## 5 1 1231 120 ## 6 1 1372 142 If we wanted to write this dataset out to a csv file, we could use the write.csv function. write.csv(x=Orange, file=&quot;orange_trees.csv&quot;, row.names=FALSE) If you run the above R code, where did orange_trees.csv get saved? (hint: in your current working directory) write.csv has many options. Run ?write.csv in your R console to read the documentation. write.csv will be very useful when you want to clean up or transform a dataset that you’ll be analyzing/working with. If your dataset is large and/or the preprocessing operations you perform are expensive, you don’t want do those operations every time you load your dataset. Instead, write a script to process the dataset and save the processed dataset. 6.2 Loading data Loading data from a csv file is straightfoward. You’ll use the read.csv function. pokemon_df &lt;- read.csv(file=&quot;lecture-material/week-02/data/pokemon.csv&quot;) head(pokemon_df) ## abilities against_bug against_dark against_dragon ## 1 [&#39;Overgrow&#39;, &#39;Chlorophyll&#39;] 1.00 1 1 ## 2 [&#39;Overgrow&#39;, &#39;Chlorophyll&#39;] 1.00 1 1 ## 3 [&#39;Overgrow&#39;, &#39;Chlorophyll&#39;] 1.00 1 1 ## 4 [&#39;Blaze&#39;, &#39;Solar Power&#39;] 0.50 1 1 ## 5 [&#39;Blaze&#39;, &#39;Solar Power&#39;] 0.50 1 1 ## 6 [&#39;Blaze&#39;, &#39;Solar Power&#39;] 0.25 1 1 ## against_electric against_fairy against_fight against_fire against_flying ## 1 0.5 0.5 0.5 2.0 2 ## 2 0.5 0.5 0.5 2.0 2 ## 3 0.5 0.5 0.5 2.0 2 ## 4 1.0 0.5 1.0 0.5 1 ## 5 1.0 0.5 1.0 0.5 1 ## 6 2.0 0.5 0.5 0.5 1 ## against_ghost against_grass against_ground against_ice against_normal ## 1 1 0.25 1 2.0 1 ## 2 1 0.25 1 2.0 1 ## 3 1 0.25 1 2.0 1 ## 4 1 0.50 2 0.5 1 ## 5 1 0.50 2 0.5 1 ## 6 1 0.25 0 1.0 1 ## against_poison against_psychic against_rock against_steel against_water ## 1 1 2 1 1.0 0.5 ## 2 1 2 1 1.0 0.5 ## 3 1 2 1 1.0 0.5 ## 4 1 1 2 0.5 2.0 ## 5 1 1 2 0.5 2.0 ## 6 1 1 4 0.5 2.0 ## attack base_egg_steps base_happiness base_total capture_rate classfication ## 1 49 5120 70 318 45 Seed Pokémon ## 2 62 5120 70 405 45 Seed Pokémon ## 3 100 5120 70 625 45 Seed Pokémon ## 4 52 5120 70 309 45 Lizard Pokémon ## 5 64 5120 70 405 45 Flame Pokémon ## 6 104 5120 70 634 45 Flame Pokémon ## defense experience_growth height_m hp japanese_name name ## 1 49 1059860 0.7 45 Fushigidaneフシギダネ Bulbasaur ## 2 63 1059860 1.0 60 Fushigisouフシギソウ Ivysaur ## 3 123 1059860 2.0 80 Fushigibanaフシギバナ Venusaur ## 4 43 1059860 0.6 39 Hitokageヒトカゲ Charmander ## 5 58 1059860 1.1 58 Lizardoリザード Charmeleon ## 6 78 1059860 1.7 78 Lizardonリザードン Charizard ## percentage_male pokedex_number sp_attack sp_defense speed type1 type2 ## 1 88.1 1 65 65 45 grass poison ## 2 88.1 2 80 80 60 grass poison ## 3 88.1 3 122 120 80 grass poison ## 4 88.1 4 60 50 65 fire ## 5 88.1 5 80 65 80 fire ## 6 88.1 6 159 115 100 fire flying ## weight_kg generation is_legendary ## 1 6.9 1 0 ## 2 13.0 1 0 ## 3 100.0 1 0 ## 4 8.5 1 0 ## 5 19.0 1 0 ## 6 90.5 1 0 One slightly tricky thing to keep in mind about loading data is where R will look for the data you’re loading. This affects how you specify the file argument when you call read.csv. You can always specify the complete file path, for example (on my computer): pokemon_df &lt;- read.csv(file=&quot;/Users/lalejina/class_ws/CIS635-f22/gvsu-cis635-2022f/lecture-material/week-02/data/pokemon.csv&quot;) head(pokemon_df) ## abilities against_bug against_dark against_dragon ## 1 [&#39;Overgrow&#39;, &#39;Chlorophyll&#39;] 1.00 1 1 ## 2 [&#39;Overgrow&#39;, &#39;Chlorophyll&#39;] 1.00 1 1 ## 3 [&#39;Overgrow&#39;, &#39;Chlorophyll&#39;] 1.00 1 1 ## 4 [&#39;Blaze&#39;, &#39;Solar Power&#39;] 0.50 1 1 ## 5 [&#39;Blaze&#39;, &#39;Solar Power&#39;] 0.50 1 1 ## 6 [&#39;Blaze&#39;, &#39;Solar Power&#39;] 0.25 1 1 ## against_electric against_fairy against_fight against_fire against_flying ## 1 0.5 0.5 0.5 2.0 2 ## 2 0.5 0.5 0.5 2.0 2 ## 3 0.5 0.5 0.5 2.0 2 ## 4 1.0 0.5 1.0 0.5 1 ## 5 1.0 0.5 1.0 0.5 1 ## 6 2.0 0.5 0.5 0.5 1 ## against_ghost against_grass against_ground against_ice against_normal ## 1 1 0.25 1 2.0 1 ## 2 1 0.25 1 2.0 1 ## 3 1 0.25 1 2.0 1 ## 4 1 0.50 2 0.5 1 ## 5 1 0.50 2 0.5 1 ## 6 1 0.25 0 1.0 1 ## against_poison against_psychic against_rock against_steel against_water ## 1 1 2 1 1.0 0.5 ## 2 1 2 1 1.0 0.5 ## 3 1 2 1 1.0 0.5 ## 4 1 1 2 0.5 2.0 ## 5 1 1 2 0.5 2.0 ## 6 1 1 4 0.5 2.0 ## attack base_egg_steps base_happiness base_total capture_rate classfication ## 1 49 5120 70 318 45 Seed Pokémon ## 2 62 5120 70 405 45 Seed Pokémon ## 3 100 5120 70 625 45 Seed Pokémon ## 4 52 5120 70 309 45 Lizard Pokémon ## 5 64 5120 70 405 45 Flame Pokémon ## 6 104 5120 70 634 45 Flame Pokémon ## defense experience_growth height_m hp japanese_name name ## 1 49 1059860 0.7 45 Fushigidaneフシギダネ Bulbasaur ## 2 63 1059860 1.0 60 Fushigisouフシギソウ Ivysaur ## 3 123 1059860 2.0 80 Fushigibanaフシギバナ Venusaur ## 4 43 1059860 0.6 39 Hitokageヒトカゲ Charmander ## 5 58 1059860 1.1 58 Lizardoリザード Charmeleon ## 6 78 1059860 1.7 78 Lizardonリザードン Charizard ## percentage_male pokedex_number sp_attack sp_defense speed type1 type2 ## 1 88.1 1 65 65 45 grass poison ## 2 88.1 2 80 80 60 grass poison ## 3 88.1 3 122 120 80 grass poison ## 4 88.1 4 60 50 65 fire ## 5 88.1 5 80 65 80 fire ## 6 88.1 6 159 115 100 fire flying ## weight_kg generation is_legendary ## 1 6.9 1 0 ## 2 13.0 1 0 ## 3 100.0 1 0 ## 4 8.5 1 0 ## 5 19.0 1 0 ## 6 90.5 1 0 Often, it’ll be easier to specify a relative path. In RStudio, when you do not specify a complete path, paths are relative to your current working directory. Run getwd() to see what your current working directory is set to. Use setwd to change your working directory. Read more about project management and R working directories here: https://r4ds.had.co.nz/workflow-projects.html "],["tidyverse.html", "Chapter 7 tidyverse", " Chapter 7 tidyverse From the tidyverse website: The tidyverse is an opinionated collection of R packages designed for data science. All packages share an underlying design philosophy, grammar, and data structures. The tidyverse includes the following packages: ggplot2 - provides a system for creating graphics based on The Grammar of Graphics dplyr - provides functions for data manipulation tidyr - provides functions that help you turn your data into tidy data readr - provides fast functions for reading data from files forcats - provides functions for working with factors tibble - provides an alternative data structure (a tibble) to the data frame stringr - provides functions for working with strings purrr - provides tools for working with functions and vectors Install the tidyverse collection of packages using: install.packages(&quot;tidyverse&quot;) While all of the tidyverse is useful for working with data (and worth spending time to learn), we’ll focus on the dplyr, tidyr, and ggplot2 packages. "],["using-dplyr-to-manipulate-data.html", "Chapter 8 Using dplyr to manipulate data 8.1 Setup 8.2 Overview 8.3 The pipe operator 8.4 Data 8.5 Filter rows with filter() 8.6 Arrange rows with arrange() 8.7 Choose rows using their position with slice() 8.8 Select columns with select() 8.9 Rename columns with rename() 8.10 Add new columns with mutate() 8.11 Change column order with relocate() 8.12 Summarize groups of rows using summarise() 8.13 dplyr cheat sheet", " Chapter 8 Using dplyr to manipulate data You can download the R Markdown file used to generate this document (or webpage) here. I would encourage you to download that Rmd file, open it own your own computer in RStudio, and run the code chunks on your own (and modify things as you wish!). Goals: Learn about solving common data manipulation challenges with dplyr Learn to use the pipe operator (%&gt;%) Sources: Introduction to dplyr R for Data Science dplyr documentation Software carpentry lesson on dplyr 8.1 Setup You should have already installed the tidyverse collection of packages, which includes the dplyr package. But, if you haven’t, go ahead and run: install.packages(&quot;tidyverse&quot;) With the tidyverse packages installed, you’ll need to load the dplyr library to use it. library(dplyr) ## ## Attaching package: &#39;dplyr&#39; ## The following objects are masked from &#39;package:stats&#39;: ## ## filter, lag ## The following objects are masked from &#39;package:base&#39;: ## ## intersect, setdiff, setequal, union 8.2 Overview This document will cover key dplyr functions that solve the most common data manipulation challenges. The examples and explanations here non-exhaustive (dplyr has a lot of functionality and each of these functions are very flexible). Instead, I’d like you to start building a sense of the broad category of data manipulations that are possible with each of the dplyr functions below. As you encounter challenges with manipulating data, you should have a solid idea of which functions you will need to do what you want to do. Then, you can use those functions’ documentation to work out the specific details. dplyr’s functions for basic data manipulation can be divided into three categories based on the component of the dataset that they work with (descriptions pulled from dplyr documentation): Rows filter() - choose rows in your data based on their column values slice() - choose rows in your data based on their location (index) in the dataset arrange() - change the ordering of rows in your data Columns select() - changes whether or not a column is included rename() - changes the names of columns mutate() - changes the values of columns and can create new columns that are functions of existing columns relocate() - changes the order of columns Groups of rows summarise() - collapses a group of rows into a single row These functions can be used in combination with group_by(), which allows you to perform these functions on particular groups of rows, instead of the entire dataset. Note that the above list of functions is non-exhaustive. I refer you to the dplyr documentation for an exhaustive list. Additionally, I’d encourage you to look over (and save) the cheat sheet linked at the end of this document. 8.3 The pipe operator Most dplyr functions take a dataframe (or tibble) as their first argument. dplyr provides the pipe operator (%&gt;%), which lets you conveniently compose multiple dplyr functions in a single line (instead of needing to save intermediate states of your dataset). The pipe operator “pipes” the results of the left side of the pipe into the first argument of the right side of the pipe. Here’s an example: f &lt;- function(a, b) { return(a + b) } g &lt;- function(a, b) { return(a * b) } x &lt;- 2 y &lt;- 100 x %&gt;% f(y) # Is the same as f(x,y) ## [1] 102 x %&gt;% f(y) %&gt;% g(y) # Is the same as g(f(x,y), y) ## [1] 10200 8.4 Data We’ll use the starwars dataset to demonstrate the basic data manipulation functions provided by dplyr. You don’t need to download anything, the starwars dataset is loaded when you load the dplyr package. dim(starwars) ## [1] 87 14 This dataset has 87 rows and 14 columns where each row represents a character from Star Wars, and each column is a particular attribute. starwars ## # A tibble: 87 × 14 ## name height mass hair_…¹ skin_…² eye_c…³ birth…⁴ sex gender homew…⁵ ## &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 Luke Skywa… 172 77 blond fair blue 19 male mascu… Tatooi… ## 2 C-3PO 167 75 &lt;NA&gt; gold yellow 112 none mascu… Tatooi… ## 3 R2-D2 96 32 &lt;NA&gt; white,… red 33 none mascu… Naboo ## 4 Darth Vader 202 136 none white yellow 41.9 male mascu… Tatooi… ## 5 Leia Organa 150 49 brown light brown 19 fema… femin… Aldera… ## 6 Owen Lars 178 120 brown,… light blue 52 male mascu… Tatooi… ## 7 Beru White… 165 75 brown light blue 47 fema… femin… Tatooi… ## 8 R5-D4 97 32 &lt;NA&gt; white,… red NA none mascu… Tatooi… ## 9 Biggs Dark… 183 84 black light brown 24 male mascu… Tatooi… ## 10 Obi-Wan Ke… 182 77 auburn… fair blue-g… 57 male mascu… Stewjon ## # … with 77 more rows, 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, ## # vehicles &lt;list&gt;, starships &lt;list&gt;, and abbreviated variable names ## # ¹​hair_color, ²​skin_color, ³​eye_color, ⁴​birth_year, ⁵​homeworld If you look closely at the above output, you’ll notice that the starwars dataset is represented as a tibble. A tibble is a more modern version of the dataframe type, and for the most part, anywhere you could use a dataframe, you can use a tibble. You can convert a data frame to tibbles with the as_tible() function. Read more about tibbles here: https://tibble.tidyverse.org/. 8.5 Filter rows with filter() filter() allows you to choose rows in a data frame based on their column values. For example, if we wanted to create a new data frame that only contained droids, we could: starwars %&gt;% filter(species==&quot;Droid&quot;) ## # A tibble: 6 × 14 ## name height mass hair_color skin_color eye_c…¹ birth…² sex gender homew…³ ## &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 C-3PO 167 75 &lt;NA&gt; gold yellow 112 none mascu… Tatooi… ## 2 R2-D2 96 32 &lt;NA&gt; white, bl… red 33 none mascu… Naboo ## 3 R5-D4 97 32 &lt;NA&gt; white, red red NA none mascu… Tatooi… ## 4 IG-88 200 140 none metal red 15 none mascu… &lt;NA&gt; ## 5 R4-P17 96 NA none silver, r… red, b… NA none femin… &lt;NA&gt; ## 6 BB8 NA NA none none black NA none mascu… &lt;NA&gt; ## # … with 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, vehicles &lt;list&gt;, ## # starships &lt;list&gt;, and abbreviated variable names ¹​eye_color, ²​birth_year, ## # ³​homeworld We can also filter rows based on more complex conditions: starwars %&gt;% filter(species == &quot;Droid&quot; &amp; height &gt; 100) ## # A tibble: 2 × 14 ## name height mass hair_color skin_color eye_co…¹ birth…² sex gender homew…³ ## &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 C-3PO 167 75 &lt;NA&gt; gold yellow 112 none mascu… Tatooi… ## 2 IG-88 200 140 none metal red 15 none mascu… &lt;NA&gt; ## # … with 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, vehicles &lt;list&gt;, ## # starships &lt;list&gt;, and abbreviated variable names ¹​eye_color, ²​birth_year, ## # ³​homeworld What if we wanted all droids, Wookiees, and Hutts? starwars %&gt;% filter(species == &quot;Droid&quot; | species == &quot;Wookiee&quot; | species == &quot;Hutt&quot;) ## # A tibble: 9 × 14 ## name height mass hair_…¹ skin_…² eye_c…³ birth…⁴ sex gender homew…⁵ ## &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 C-3PO 167 75 &lt;NA&gt; gold yellow 112 none mascu… Tatooi… ## 2 R2-D2 96 32 &lt;NA&gt; white,… red 33 none mascu… Naboo ## 3 R5-D4 97 32 &lt;NA&gt; white,… red NA none mascu… Tatooi… ## 4 Chewbacca 228 112 brown unknown blue 200 male mascu… Kashyy… ## 5 Jabba Desil… 175 1358 &lt;NA&gt; green-… orange 600 herm… mascu… Nal Hu… ## 6 IG-88 200 140 none metal red 15 none mascu… &lt;NA&gt; ## 7 R4-P17 96 NA none silver… red, b… NA none femin… &lt;NA&gt; ## 8 Tarfful 234 136 brown brown blue NA male mascu… Kashyy… ## 9 BB8 NA NA none none black NA none mascu… &lt;NA&gt; ## # … with 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, vehicles &lt;list&gt;, ## # starships &lt;list&gt;, and abbreviated variable names ¹​hair_color, ²​skin_color, ## # ³​eye_color, ⁴​birth_year, ⁵​homeworld Even more simply with the %in% operator, starwars %&gt;% filter(species %in% c(&quot;Droid&quot;, &quot;Wookiee&quot;, &quot;Hutt&quot;)) ## # A tibble: 9 × 14 ## name height mass hair_…¹ skin_…² eye_c…³ birth…⁴ sex gender homew…⁵ ## &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 C-3PO 167 75 &lt;NA&gt; gold yellow 112 none mascu… Tatooi… ## 2 R2-D2 96 32 &lt;NA&gt; white,… red 33 none mascu… Naboo ## 3 R5-D4 97 32 &lt;NA&gt; white,… red NA none mascu… Tatooi… ## 4 Chewbacca 228 112 brown unknown blue 200 male mascu… Kashyy… ## 5 Jabba Desil… 175 1358 &lt;NA&gt; green-… orange 600 herm… mascu… Nal Hu… ## 6 IG-88 200 140 none metal red 15 none mascu… &lt;NA&gt; ## 7 R4-P17 96 NA none silver… red, b… NA none femin… &lt;NA&gt; ## 8 Tarfful 234 136 brown brown blue NA male mascu… Kashyy… ## 9 BB8 NA NA none none black NA none mascu… &lt;NA&gt; ## # … with 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, vehicles &lt;list&gt;, ## # starships &lt;list&gt;, and abbreviated variable names ¹​hair_color, ²​skin_color, ## # ³​eye_color, ⁴​birth_year, ⁵​homeworld Notice that the original starwars dataset is never modified by any of the filter functions. None of the dplyr functions modify the dataset passed to them with the data argument. Instead, they return a new data frame with the appropriate manipulations. 8.6 Arrange rows with arrange() arrange() reorders rows in the given data frame. It takes a data frame and a set of columns names to reorder by. If you give more than one column name, additional column names are used to break ties in the values of proceeding column names. starwars %&gt;% arrange(mass, height) ## # A tibble: 87 × 14 ## name height mass hair_…¹ skin_…² eye_c…³ birth…⁴ sex gender homew…⁵ ## &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 Ratts Tyer… 79 15 none grey, … unknown NA male mascu… Aleen … ## 2 Yoda 66 17 white green brown 896 male mascu… &lt;NA&gt; ## 3 Wicket Sys… 88 20 brown brown brown 8 male mascu… Endor ## 4 R2-D2 96 32 &lt;NA&gt; white,… red 33 none mascu… Naboo ## 5 R5-D4 97 32 &lt;NA&gt; white,… red NA none mascu… Tatooi… ## 6 Sebulba 112 40 none grey, … orange NA male mascu… Malast… ## 7 Dud Bolt 94 45 none blue, … yellow NA male mascu… Vulpter ## 8 Padmé Amid… 165 45 brown light brown 46 fema… femin… Naboo ## 9 Sly Moore 178 48 none pale white NA &lt;NA&gt; &lt;NA&gt; Umbara ## 10 Wat Tambor 193 48 none green,… unknown NA male mascu… Skako ## # … with 77 more rows, 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, ## # vehicles &lt;list&gt;, starships &lt;list&gt;, and abbreviated variable names ## # ¹​hair_color, ²​skin_color, ³​eye_color, ⁴​birth_year, ⁵​homeworld You can use desc() to order in descending order. starwars %&gt;% arrange(desc(mass)) ## # A tibble: 87 × 14 ## name height mass hair_…¹ skin_…² eye_c…³ birth…⁴ sex gender homew…⁵ ## &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 Jabba Desi… 175 1358 &lt;NA&gt; green-… orange 600 herm… mascu… Nal Hu… ## 2 Grievous 216 159 none brown,… green,… NA male mascu… Kalee ## 3 IG-88 200 140 none metal red 15 none mascu… &lt;NA&gt; ## 4 Darth Vader 202 136 none white yellow 41.9 male mascu… Tatooi… ## 5 Tarfful 234 136 brown brown blue NA male mascu… Kashyy… ## 6 Owen Lars 178 120 brown,… light blue 52 male mascu… Tatooi… ## 7 Bossk 190 113 none green red 53 male mascu… Trando… ## 8 Chewbacca 228 112 brown unknown blue 200 male mascu… Kashyy… ## 9 Jek Tono P… 180 110 brown fair blue NA male mascu… Bestin… ## 10 Dexter Jet… 198 102 none brown yellow NA male mascu… Ojom ## # … with 77 more rows, 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, ## # vehicles &lt;list&gt;, starships &lt;list&gt;, and abbreviated variable names ## # ¹​hair_color, ²​skin_color, ³​eye_color, ⁴​birth_year, ⁵​homeworld 8.7 Choose rows using their position with slice() Use slice to choose rows by their position. For example, to choose the character in the second row of the data frame: starwars %&gt;% slice(2) ## # A tibble: 1 × 14 ## name height mass hair_color skin_color eye_co…¹ birth…² sex gender homew…³ ## &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 C-3PO 167 75 &lt;NA&gt; gold yellow 112 none mascu… Tatooi… ## # … with 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, vehicles &lt;list&gt;, ## # starships &lt;list&gt;, and abbreviated variable names ¹​eye_color, ²​birth_year, ## # ³​homeworld The first, tenth, and twentieth rows of the data frame, starwars %&gt;% slice(c(1,10,20)) ## # A tibble: 3 × 14 ## name height mass hair_…¹ skin_…² eye_c…³ birth…⁴ sex gender homew…⁵ ## &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 Luke Skywal… 172 77 blond fair blue 19 male mascu… Tatooi… ## 2 Obi-Wan Ken… 182 77 auburn… fair blue-g… 57 male mascu… Stewjon ## 3 Palpatine 170 75 grey pale yellow 82 male mascu… Naboo ## # … with 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, vehicles &lt;list&gt;, ## # starships &lt;list&gt;, and abbreviated variable names ¹​hair_color, ²​skin_color, ## # ³​eye_color, ⁴​birth_year, ⁵​homeworld The odd rows of the data frame, starwars %&gt;% slice(seq(1,nrow(starwars), 2)) ## # A tibble: 44 × 14 ## name height mass hair_…¹ skin_…² eye_c…³ birth…⁴ sex gender homew…⁵ ## &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 Luke Skywa… 172 77 blond fair blue 19 male mascu… Tatooi… ## 2 R2-D2 96 32 &lt;NA&gt; white,… red 33 none mascu… Naboo ## 3 Leia Organa 150 49 brown light brown 19 fema… femin… Aldera… ## 4 Beru White… 165 75 brown light blue 47 fema… femin… Tatooi… ## 5 Biggs Dark… 183 84 black light brown 24 male mascu… Tatooi… ## 6 Anakin Sky… 188 84 blond fair blue 41.9 male mascu… Tatooi… ## 7 Chewbacca 228 112 brown unknown blue 200 male mascu… Kashyy… ## 8 Greedo 173 74 &lt;NA&gt; green black 44 male mascu… Rodia ## 9 Wedge Anti… 170 77 brown fair hazel 21 male mascu… Corell… ## 10 Yoda 66 17 white green brown 896 male mascu… &lt;NA&gt; ## # … with 34 more rows, 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, ## # vehicles &lt;list&gt;, starships &lt;list&gt;, and abbreviated variable names ## # ¹​hair_color, ²​skin_color, ³​eye_color, ⁴​birth_year, ⁵​homeworld Combine with arrange() to quickly get the character with the largest height, starwars %&gt;% arrange(desc(height)) %&gt;% slice(1) ## # A tibble: 1 × 14 ## name height mass hair_c…¹ skin_…² eye_c…³ birth…⁴ sex gender homew…⁵ ## &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 Yarael Poof 264 NA none white yellow NA male mascu… Quermia ## # … with 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, vehicles &lt;list&gt;, ## # starships &lt;list&gt;, and abbreviated variable names ¹​hair_color, ²​skin_color, ## # ³​eye_color, ⁴​birth_year, ⁵​homeworld There are a few convenient helper versions of the slice function: slice_head slice_tail slice_sample slice_min slice_max I’ll leave it to you to pull up the help page for those functions. 8.8 Select columns with select() When you’re working with large datasets, sometimes you want to drop all of the columns you’re not using or interested in. For example, if you only wanted the species column: starwars %&gt;% select(species) ## # A tibble: 87 × 1 ## species ## &lt;chr&gt; ## 1 Human ## 2 Droid ## 3 Droid ## 4 Human ## 5 Human ## 6 Human ## 7 Human ## 8 Droid ## 9 Human ## 10 Human ## # … with 77 more rows Or, if you wanted name, species, and homeworld: starwars %&gt;% select(name, species, homeworld) ## # A tibble: 87 × 3 ## name species homeworld ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 Luke Skywalker Human Tatooine ## 2 C-3PO Droid Tatooine ## 3 R2-D2 Droid Naboo ## 4 Darth Vader Human Tatooine ## 5 Leia Organa Human Alderaan ## 6 Owen Lars Human Tatooine ## 7 Beru Whitesun lars Human Tatooine ## 8 R5-D4 Droid Tatooine ## 9 Biggs Darklighter Human Tatooine ## 10 Obi-Wan Kenobi Human Stewjon ## # … with 77 more rows What if you wanted all columns with the letter m in the column name? starwars %&gt;% select(contains(&quot;m&quot;)) ## # A tibble: 87 × 4 ## name mass homeworld films ## &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;list&gt; ## 1 Luke Skywalker 77 Tatooine &lt;chr [5]&gt; ## 2 C-3PO 75 Tatooine &lt;chr [6]&gt; ## 3 R2-D2 32 Naboo &lt;chr [7]&gt; ## 4 Darth Vader 136 Tatooine &lt;chr [4]&gt; ## 5 Leia Organa 49 Alderaan &lt;chr [5]&gt; ## 6 Owen Lars 120 Tatooine &lt;chr [3]&gt; ## 7 Beru Whitesun lars 75 Tatooine &lt;chr [3]&gt; ## 8 R5-D4 32 Tatooine &lt;chr [1]&gt; ## 9 Biggs Darklighter 84 Tatooine &lt;chr [1]&gt; ## 10 Obi-Wan Kenobi 77 Stewjon &lt;chr [6]&gt; ## # … with 77 more rows See the tidyselect documentation for more selection helpers (like contains). 8.9 Rename columns with rename() rename() lets you rename columns. For example, if you wanted to rename the column “homeworld” to “home_world”: renamed_starwars &lt;- starwars %&gt;% rename(home_world=homeworld) colnames(starwars) ## [1] &quot;name&quot; &quot;height&quot; &quot;mass&quot; &quot;hair_color&quot; &quot;skin_color&quot; ## [6] &quot;eye_color&quot; &quot;birth_year&quot; &quot;sex&quot; &quot;gender&quot; &quot;homeworld&quot; ## [11] &quot;species&quot; &quot;films&quot; &quot;vehicles&quot; &quot;starships&quot; colnames(renamed_starwars) ## [1] &quot;name&quot; &quot;height&quot; &quot;mass&quot; &quot;hair_color&quot; &quot;skin_color&quot; ## [6] &quot;eye_color&quot; &quot;birth_year&quot; &quot;sex&quot; &quot;gender&quot; &quot;home_world&quot; ## [11] &quot;species&quot; &quot;films&quot; &quot;vehicles&quot; &quot;starships&quot; 8.10 Add new columns with mutate() Often, it is useful to add new columns that are functions of existing columns. For example, we could add a new column to each row that is the product of that row’s height and mass values. starwars_new_col &lt;- starwars %&gt;% mutate(heightXmass = height * mass) colnames(starwars_new_col) ## [1] &quot;name&quot; &quot;height&quot; &quot;mass&quot; &quot;hair_color&quot; &quot;skin_color&quot; ## [6] &quot;eye_color&quot; &quot;birth_year&quot; &quot;sex&quot; &quot;gender&quot; &quot;homeworld&quot; ## [11] &quot;species&quot; &quot;films&quot; &quot;vehicles&quot; &quot;starships&quot; &quot;heightXmass&quot; 8.11 Change column order with relocate() Relocate let’s you move columns around in your data set. For example, to move the name column after the height column, you can: starwars %&gt;% relocate(name, .after=height) ## # A tibble: 87 × 14 ## height name mass hair_…¹ skin_…² eye_c…³ birth…⁴ sex gender homew…⁵ ## &lt;int&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 172 Luke Skywa… 77 blond fair blue 19 male mascu… Tatooi… ## 2 167 C-3PO 75 &lt;NA&gt; gold yellow 112 none mascu… Tatooi… ## 3 96 R2-D2 32 &lt;NA&gt; white,… red 33 none mascu… Naboo ## 4 202 Darth Vader 136 none white yellow 41.9 male mascu… Tatooi… ## 5 150 Leia Organa 49 brown light brown 19 fema… femin… Aldera… ## 6 178 Owen Lars 120 brown,… light blue 52 male mascu… Tatooi… ## 7 165 Beru White… 75 brown light blue 47 fema… femin… Tatooi… ## 8 97 R5-D4 32 &lt;NA&gt; white,… red NA none mascu… Tatooi… ## 9 183 Biggs Dark… 84 black light brown 24 male mascu… Tatooi… ## 10 182 Obi-Wan Ke… 77 auburn… fair blue-g… 57 male mascu… Stewjon ## # … with 77 more rows, 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, ## # vehicles &lt;list&gt;, starships &lt;list&gt;, and abbreviated variable names ## # ¹​hair_color, ²​skin_color, ³​eye_color, ⁴​birth_year, ⁵​homeworld 8.12 Summarize groups of rows using summarise() summarise() collapses a dataset into a single row. starwars %&gt;% summarise(mass = mean(mass, na.rm=TRUE)) ## # A tibble: 1 × 1 ## mass ## &lt;dbl&gt; ## 1 97.3 summarise() is particularly useful in combination with the group_by function. For example, to get the average mass of characters in each species, starwars %&gt;% group_by(species) %&gt;% summarise(mass=mean(mass, na.rm=TRUE)) ## # A tibble: 38 × 2 ## species mass ## &lt;chr&gt; &lt;dbl&gt; ## 1 Aleena 15 ## 2 Besalisk 102 ## 3 Cerean 82 ## 4 Chagrian NaN ## 5 Clawdite 55 ## 6 Droid 69.8 ## 7 Dug 40 ## 8 Ewok 20 ## 9 Geonosian 80 ## 10 Gungan 74 ## # … with 28 more rows Or, if we wanted to count the number of characters of each species, starwars %&gt;% group_by(species) %&gt;% summarise(count=n()) ## # A tibble: 38 × 2 ## species count ## &lt;chr&gt; &lt;int&gt; ## 1 Aleena 1 ## 2 Besalisk 1 ## 3 Cerean 1 ## 4 Chagrian 1 ## 5 Clawdite 1 ## 6 Droid 6 ## 7 Dug 1 ## 8 Ewok 1 ## 9 Geonosian 1 ## 10 Gungan 3 ## # … with 28 more rows 8.13 dplyr cheat sheet Download pdf here: https://github.com/rstudio/cheatsheets/blob/main/data-transformation.pdf "],["using-tidyr-to-create-tidy-data.html", "Chapter 9 Using tidyr to create tidy data 9.1 Setup 9.2 Overview 9.3 What is tidy data? 9.4 Making data tidy", " Chapter 9 Using tidyr to create tidy data You can download the R Markdown file used to generate this document (or webpage) here. I would encourage you to download that Rmd file, open it own your own computer in RStudio, and run the code chunks on your own (and modify things as you wish!). Goals: Work through examples of using tidyr (and dplyr) functions to clean up messy (un-tidy) data Sources: https://tidyr.tidyverse.org/articles/tidy-data.html R for Data Science 9.1 Setup You should have already installed the tidyverse collection of packages, which includes the tidyr package. But, if you haven’t, go ahead and run: install.packages(&quot;tidyverse&quot;) In this document, we’ll be using the tidyr and dplyr packages. library(tidyr) library(dplyr) 9.2 Overview If you have not already, I suggest that you read the following article for an introduction to tidy data: https://tidyr.tidyverse.org/articles/tidy-data.html. Additionally, I suggest that you work through the dplyr R Markdown material before working through this document. The tidyr package provides functions for making messy data “tidy”. For a complete list of the included functions, see https://tidyr.tidyverse.org/reference/index.html. Understanding tidy data and how to reformat your data into a tidy format is very important, as many of the functions/packages that we will use this semester are written to work with tidy-format data. For example, ggplot (the R graphics package that we will be using) assumes tidy data. Taking the time now to get comfortable with what it means to have tidy data will save you substantial time later on. 9.3 What is tidy data? You can represent the same underlying data many ways. For example, let’s say we have the following data about students’ grades: messy_grade_data1 &lt;- read.csv(&quot;lecture-material/week-02/data/messy_grades_1.csv&quot;, na.strings=&quot;&quot;) messy_grade_data1 ## name quiz1 quiz2 test1 ## 1 Billy &lt;NA&gt; D C ## 2 Suzy F &lt;NA&gt; &lt;NA&gt; ## 3 Lionel B C B ## 4 Jenny A A B Or, the same exact data could be structured as follows: messy_grade_data2 &lt;- read.csv(&quot;lecture-material/week-02/data/messy_grades_2.csv&quot;, na.strings=&quot;&quot;) messy_grade_data2 ## assessment Billy Suzy Lionel Jenny ## 1 quiz1 &lt;NA&gt; FALSE B A ## 2 quiz2 D NA C A ## 3 test1 C NA B B Neither of these formats are particularly convenient to work with. For example, in messy_grade_data2 format, it would be difficult to query the full set of student names in the dataset (because each student has their own column). Likewise, in messy_grade_data1, it would be diffult to query the set of assessments. From https://tidyr.tidyverse.org/articles/tidy-data.html, A dataset is a collection of values, usually either numbers (if quantitative) or strings (if qualitative). Values are organised in two ways. Every value belongs to a variable and an observation. A variable contains all values that measure the same underlying attribute (like height, temperature, duration) across units. An observation contains all values measured on the same unit (like a person, or a day, or a race) across attributes. A tidy version of the grade data would look something like this: tidy_grade_data &lt;- messy_grade_data1 %&gt;% pivot_longer(c(quiz1,quiz2,test1), names_to=&quot;assessment&quot;, values_to=&quot;grade&quot;) tidy_grade_data ## # A tibble: 12 × 3 ## name assessment grade ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 Billy quiz1 &lt;NA&gt; ## 2 Billy quiz2 D ## 3 Billy test1 C ## 4 Suzy quiz1 F ## 5 Suzy quiz2 &lt;NA&gt; ## 6 Suzy test1 &lt;NA&gt; ## 7 Lionel quiz1 B ## 8 Lionel quiz2 C ## 9 Lionel test1 B ## 10 Jenny quiz1 A ## 11 Jenny quiz2 A ## 12 Jenny test1 B This arrangement makes the values, variables, and observations clearer. What are the values, variables, and observations in the grade data? (the answer is here). A dataset is tidy if: Each variable has its own column Each observation has its own row Each value has its own cell In the grade data, we have the following variables: student name, assessment, and grade. Each observation is a particular student’s grade on a particular assessment (e.g., Jenny’s grade on test1). Each cell in the dataset specifies a value for a particular variable (e.g., in row 1 of tidy_grade_data, Billy is the value of the name variable). 9.4 Making data tidy Two common ways that data is messy: Column headers are values, not variable names Multiple variables are stored in one column For more common ways that data are often messy, see: https://tidyr.tidyverse.org/articles/tidy-data.html#tidying Below, are datasets that exemplify each problem. 9.4.1 Column headers are values, not variables Observations over time are often recorded in a “wide” format. That is, each timepoint that an observation is made is entered as a column. This is convienient for data entry. For example, imagine you measure the temperature of a lake at several different depths over a 10 week period (one measurement for each depth every week). It’s convenient to enter that data in a “wide” format where each week is a column. However, this is not tidy, as each row is no longer a single observation. The billboard dataset that is loaded when you load the tidyr package is exemplifies this problem. billboard ## # A tibble: 317 × 79 ## artist track date.ent…¹ wk1 wk2 wk3 wk4 wk5 wk6 wk7 wk8 wk9 ## &lt;chr&gt; &lt;chr&gt; &lt;date&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 2 Pac Baby… 2000-02-26 87 82 72 77 87 94 99 NA NA ## 2 2Ge+h… The … 2000-09-02 91 87 92 NA NA NA NA NA NA ## 3 3 Doo… Kryp… 2000-04-08 81 70 68 67 66 57 54 53 51 ## 4 3 Doo… Loser 2000-10-21 76 76 72 69 67 65 55 59 62 ## 5 504 B… Wobb… 2000-04-15 57 34 25 17 17 31 36 49 53 ## 6 98^0 Give… 2000-08-19 51 39 34 26 26 19 2 2 3 ## 7 A*Tee… Danc… 2000-07-08 97 97 96 95 100 NA NA NA NA ## 8 Aaliy… I Do… 2000-01-29 84 62 51 41 38 35 35 38 38 ## 9 Aaliy… Try … 2000-03-18 59 53 38 28 21 18 16 14 12 ## 10 Adams… Open… 2000-08-26 76 76 74 69 68 67 61 58 57 ## # … with 307 more rows, 67 more variables: wk10 &lt;dbl&gt;, wk11 &lt;dbl&gt;, wk12 &lt;dbl&gt;, ## # wk13 &lt;dbl&gt;, wk14 &lt;dbl&gt;, wk15 &lt;dbl&gt;, wk16 &lt;dbl&gt;, wk17 &lt;dbl&gt;, wk18 &lt;dbl&gt;, ## # wk19 &lt;dbl&gt;, wk20 &lt;dbl&gt;, wk21 &lt;dbl&gt;, wk22 &lt;dbl&gt;, wk23 &lt;dbl&gt;, wk24 &lt;dbl&gt;, ## # wk25 &lt;dbl&gt;, wk26 &lt;dbl&gt;, wk27 &lt;dbl&gt;, wk28 &lt;dbl&gt;, wk29 &lt;dbl&gt;, wk30 &lt;dbl&gt;, ## # wk31 &lt;dbl&gt;, wk32 &lt;dbl&gt;, wk33 &lt;dbl&gt;, wk34 &lt;dbl&gt;, wk35 &lt;dbl&gt;, wk36 &lt;dbl&gt;, ## # wk37 &lt;dbl&gt;, wk38 &lt;dbl&gt;, wk39 &lt;dbl&gt;, wk40 &lt;dbl&gt;, wk41 &lt;dbl&gt;, wk42 &lt;dbl&gt;, ## # wk43 &lt;dbl&gt;, wk44 &lt;dbl&gt;, wk45 &lt;dbl&gt;, wk46 &lt;dbl&gt;, wk47 &lt;dbl&gt;, wk48 &lt;dbl&gt;, … The billboard dataset records the date a song enters the billboard top 100. First on your own, use the pivot_longer function to create a tidy version of the billboard dataset. The solution can be found here. 9.4.2 Multiple variables are stored in one column Sometimes, the values in a column describe multiple variables. For example, in the following messy dataset, the month and day of each temperature recording are combined under a single column. messy_temperature &lt;- read.csv(&quot;lecture-material/week-02/data/multi_variables_single_col.csv&quot;) messy_temperature ## date year temperature ## 1 jan1 2022 15 ## 2 jan14 2022 130 ## 3 feb1 2022 19 ## 4 feb14 2022 85 ## 5 mar1 2022 95 ## 6 mar14 2022 130 ## 7 apr1 2022 29 ## 8 apr14 2022 42 ## 9 may1 2022 138 ## 10 may14 2022 14 ## 11 jun1 2022 133 ## 12 jun14 2022 53 ## 13 jul1 2022 120 ## 14 jul14 2022 108 ## 15 aug1 2022 23 ## 16 aug14 2022 148 ## 17 sep1 2022 103 ## 18 sep14 2022 113 ## 19 nov1 2022 67 ## 20 nov14 2022 1 ## 21 oct1 2022 113 ## 22 oct14 2022 56 ## 23 dec1 2022 107 ## 24 dec14 2022 30 The first three characters of the “date” column give the month, and the following numeric value gives the day of the month of the temperature reading. We can use the separate function to properly split the date column into multiple columns. tidy_temperature &lt;- messy_temperature %&gt;% separate(col=date, into=c(&quot;month&quot;,&quot;day&quot;), sep=3) tidy_temperature ## month day year temperature ## 1 jan 1 2022 15 ## 2 jan 14 2022 130 ## 3 feb 1 2022 19 ## 4 feb 14 2022 85 ## 5 mar 1 2022 95 ## 6 mar 14 2022 130 ## 7 apr 1 2022 29 ## 8 apr 14 2022 42 ## 9 may 1 2022 138 ## 10 may 14 2022 14 ## 11 jun 1 2022 133 ## 12 jun 14 2022 53 ## 13 jul 1 2022 120 ## 14 jul 14 2022 108 ## 15 aug 1 2022 23 ## 16 aug 14 2022 148 ## 17 sep 1 2022 103 ## 18 sep 14 2022 113 ## 19 nov 1 2022 67 ## 20 nov 14 2022 1 ## 21 oct 1 2022 113 ## 22 oct 14 2022 56 ## 23 dec 1 2022 107 ## 24 dec 14 2022 30 Run ?separate to see how the separate function works. Adding extra columns doesn’t “untidy” your data. Sometimes it is useful to add additional aggregate labels to an observation (especially when working with dates). For example, it might be useful to add a proper date column (with the format YEAR-MONTH-DAY) to our tidied temperature data. I’ll leave that as an exercise for you to do on your own. You’ll need to map each month string to its numeric representation (e.g. jan = 1, feb = 2). Then you can use mutate to create a new column from the relevant columns. "],["creating-graphics-with-ggplot2.html", "Chapter 10 Creating graphics with ggplot2 10.1 Resources for using ggplot2", " Chapter 10 Creating graphics with ggplot2 Read the Data Visualization chapter of R for Data Science. the tidyverse collection of packages, which includes the ggplot2 package. But, if you haven’t, go ahead and run: install.packages(&quot;tidyverse&quot;) 10.1 Resources for using ggplot2 For a super handy ggplot2 reference: ggplot2 cheatsheet Software carpentry lesson on creating publication quality graphics with ggplot2 ggplot2 documentation R for Data Science "],["homework-2.html", "Chapter 11 Homework 2 11.1 Overview 11.2 Setup 11.3 Part A. Loading data in R 11.4 Part B. Visualizing data with ggplot2", " Chapter 11 Homework 2 11.1 Overview 11.1.1 Objectives Identify a public dataset (formatted as a .csv) Practice using R to load and view characteristics of a dataset Practice using ggplot2 to create visualizations 11.1.2 Grading Part A is worth 40% Part B is worth 60% 11.2 Setup Create a new R Markdown file with the title “Homework 2” and with you as the author (hint: this information should be in your frontmatter at the top of the file). For this assignment, you’ll need to have the tidyverse collection of R packages installed. If you haven’t already, go ahead and install them by running install.packages(\"tidyverse\"). In your R markdown file, create a section heading for each of the following parts of your homework: Part A. Visualizing data with ggplot2 Part B. Loading data in R 11.3 Part A. Loading data in R Find a publicly available dataset that is represented as a .csv file. Your chosen dataset should not be trivial (# rows * # columns should be at least 250 cells), and you may not choose the same dataset that I demonstrate in this week’s lecture material. When choosing a dataset, keep in mind that you need to creating at least three different types of plots using your chosen dataset. You will upload the chosen data set as a .csv file along with your homework submission. Tell me about your data set. Where did you get it? Who/what created it? Load your dataset into a data frame (or a tibble, your choice) Print the number of rows and columns (using R code) Print the column names (using R) If your dataset is not tidy, reformat it (using R code) to be tidy. Use the mutate function (from the dplyr package) to add a column to your data frame. It’s okay if the new column isn’t useful. 11.4 Part B. Visualizing data with ggplot2 Using ggplot2, create three different types of plots (use at least three different geoms) using your chosen data set from Part A. Be creative! Feel free to draw inspiration from the R Graph Gallery. On each of your plots, explicitly label your axes (e.g., using the labs function). On at least one of your plots, use either the color or fill aesthetic. "],["references.html", "References", " References "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
